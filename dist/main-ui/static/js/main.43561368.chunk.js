(this["webpackJsonpsliding-tiles"]=this["webpackJsonpsliding-tiles"]||[]).push([[0],{76:function(e,t,n){"use strict";n.r(t);var o,r=n(0),i=n.n(r),c=n(49),a=n.n(c),s=n(104),u=n(101),l=n(53),d=n(103),f=n(52),v=n.n(f),b=n(44),p=n(45),h=n.n(p),m=n(8),w=n(50),g=n(5),j=n(105),O=n.p+"static/media/backgroundSound.15e6429d.mp3",x=n.p+"static/media/beautifullvlong.3d9c5268.wav",y=n.p+"static/media/cutefrogmedium.096d1324.wav",E=n.p+"static/media/flowing-canal.01563c63.wav",T=n.p+"static/media/hint.988fc418.wav",L=n.p+"static/media/move.a7304208.wav",S=n.p+"static/media/win.8984c762.wav",k=n.p+"static/media/wrong-move.f055716f.mp3",R=n(3),H=Object(r.createContext)({}),I=function(e){var t=e.children,n=Object(r.useRef)(null),o=Object(r.useRef)(null),i=Object(r.useRef)(null),c=Object(r.useRef)(null),a=Object(r.useRef)(null),s=Object(r.useRef)(null),u=Object(r.useRef)(null),l=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=n.current,t=o.current,r=i.current,a=c.current;if(e||t||r||a){var s=function(){e&&e.play(),t&&t.play(),r&&r.play(),a&&a.play()},u=function(){e&&e.pause(),t&&t.pause(),r&&r.pause(),a&&a.pause()},l=function e(){window.removeEventListener("click",e),s()};return e&&(e.volume=.1),t&&(t.volume=.2),r&&(r.volume=.1),a&&(a.volume=.1),window.addEventListener("click",l),window.addEventListener("focus",s),window.addEventListener("blur",u),function(){u(),window.removeEventListener("focus",s),window.removeEventListener("blur",u),window.removeEventListener("click",l)}}}),[]);var d={moveTileSound:function(){a.current&&(a.current.volume=.9,a.current.currentTime=0,a.current.play())},wrongMoveRequestTileSound:function(){s.current&&(s.current.volume=.7,s.current.currentTime=0,s.current.play())},boardOrderHintSound:function(){u.current&&(u.current.volume=.7,u.current.currentTime=0,u.current.play())},levelCompletedSound:function(){return new Promise((function(e){l.current?(l.current.volume=.1,l.current.currentTime=0,l.current.onpause=e,l.current.play()):e(null)}))}};return Object(R.jsxs)(H.Provider,{value:d,children:[t,Object(R.jsx)("audio",{ref:n,src:E,loop:!0}),Object(R.jsx)("audio",{ref:o,src:O,loop:!0}),Object(R.jsx)("audio",{ref:i,src:y,loop:!0}),Object(R.jsx)("audio",{ref:c,src:x,loop:!0}),Object(R.jsx)("audio",{ref:a,src:L,preload:"auto"}),Object(R.jsx)("audio",{ref:s,src:k,preload:"auto"}),Object(R.jsx)("audio",{ref:u,src:T,preload:"auto"}),Object(R.jsx)("audio",{ref:l,src:S,preload:"auto"})]})},C=n.p+"static/media/frog.747d96f1.svg";!function(e){e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT"}(o||(o={}));var F=function(e,t,n){var o=e.flat().reduce((function(e,t){return e[t.slot.join("")]=t,e}),{});o[t.join("")].slot=n,o[n.join("")].slot=t},P=function(e,t){var n=Object(g.a)(e,2),o=n[0],r=n[1],i=Object(g.a)(t,2),c=i[0],a=i[1];return[[o-1,r],[o+1,r],[o,r-1],[o,r+1]].filter((function(e){var t=Object(g.a)(e,2),n=t[0],o=t[1];return n>=0&&n<=c&&o>=0&&o<=a}))},M=1280,z=function(e){var t=e.width,n=e.height,o=e.dimensions,r=e.image,i=Object(g.a)(o,2),c=i[0],a=i[1],s={width:t/c,height:n/a},u="url(".concat(r,")"),l="".concat(M,"px auto"),d=Array.from({length:a}).map((function(e,t){return Array.from({length:c}).map((function(e,n){var o=t*s.height;return{slot:[t,n],position:t*c+n,dimensions:s,background:{image:u,size:l,position:"".concat(-(n*s.width),"px ").concat(-o,"px")}}}))}));d[a-1][c-1].type="PLACEHOLDER";var f=c*a-1;f>3&&(f*=100);var v=function(e,t){for(var n=e[e.length-1][e[0].length-1].slot,o=Object(m.a)(n),r=P(o,n),i=0;i<t;i++){var c=r[Math.floor(Math.random()*r.length)];F(e,o,c),r=P(o=c,n)}return{tileGrid:Object(m.a)(e),emptySlot:o,movableSlots:r}}(d,f);return{tileGrid:v.tileGrid,emptySlot:v.emptySlot,movableSlots:v.movableSlots}},D=n(100),N=Object(D.a)((function(){return{tile:{display:"block",backgroundRepeat:"no-repeat",position:"absolute",borderRadius:"6px",transition:"left .2s, top .2s",willChange:"top, left, z-index","&:before":{display:"none",counterIncrement:"tile-number",content:"counter(tile-number)",paddingLeft:"10px",paddingTop:"10px",color:"#ddd",textShadow:"0 1px 1px #000"}},moveHint:{boxShadow:"\n      0px 0px 10px #0f0,\n      0px 0px 10px #0f0 inset\n    ",zIndex:99},slotHint:{border:"4px solid transparent",boxSizing:"border-box",background:"\n      linear-gradient(#ccc, #ccc) padding-box,\n      repeating-linear-gradient(-45deg, #333 0, #333 25%, transparent 0, transparent 50%) 0 / .6em .6em\n    ",animation:"$ants 12s linear infinite",zIndex:100},"@keyframes ants":{to:{backgroundPosition:"100%"}}}})),q=function(e){var t=e.background,n=e.dimensions,i=e.type,c=e.slot,a=e.slotHint,s=e.onMoveRequest,u=e.isLocked,l=e.position,d=e.motionDirection,f=e.scaleFactor,v=e.onPositionHintRequest;a&&(c=a);var b=N(),p=Object(r.useContext)(H).wrongMoveRequestTileSound,h=[b.tile],m={width:n.width,height:n.height,top:c[0]*n.height,left:c[1]*n.width};switch(["SLOT_HINT","MOVE_HINT"].includes(i||"")||(m.zIndex=c[0]),i){case"PLACEHOLDER":break;case"SLOT_HINT":h.push(b.slotHint)}i&&"MOVE_HINT"!==i&&!a||(Object.assign(m,{backgroundImage:t.image,backgroundSize:t.size,backgroundPosition:t.position}),"MOVE_HINT"===i?h.push(b.moveHint):m.boxShadow="\n        0 -3px 3px -3px #333 inset,\n        0 0 3px -1px #333 inset,\n        0 3px 5px -3px #fff inset,\n        0 -1px 3px -4px #fff inset,\n        0 20px 20px -10px rgba(0, 0, 0, 0.5)\n      ");var w=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e;if(0===(null===(e=navigator)||void 0===e?void 0:e.maxTouchPoints)&&w.current){var t=w.current,n=function(e){if(2===e.button){e.preventDefault();var t=v(l,c);window.addEventListener("mouseup",(function e(){window.removeEventListener("mouseup",e),"function"===typeof t&&t()}))}},o=function(e){e.preventDefault()};return t.addEventListener("contextmenu",o),t.addEventListener("mousedown",n),function(){t.removeEventListener("mousedown",n),t.removeEventListener("contextmenu",o)}}}),[c,l,v]),Object(r.useEffect)((function(){if(!u&&navigator.maxTouchPoints>0&&w.current){var e=w.current,t=function(t){if(1===t.targetTouches.length&&1===t.changedTouches.length){t.preventDefault();var r,i=t.changedTouches[0],a=i.clientX,u=i.clientY,l=e.style.display,v=a,b=u,p=!1,h=function t(){r=e.cloneNode(!1),e.style.display="none",r.style.transition="none",r.style.zIndex="999",r.style.transform="translate(0, 0)",e.after(r),window.removeEventListener("touchmove",t),window.addEventListener("touchmove",m)},m=function(e){var t=e.changedTouches[0],i=t.clientX,c=t.clientY;switch(d){case o.LEFT:case o.RIGHT:var s=(i-a)/f;switch(d){case o.LEFT:p=i-v<0,s<0&&s>-n.width&&(r.style.transform="translateX(".concat(s,"px)"));break;case o.RIGHT:p=i-v>0,s>0&&s<n.width&&(r.style.transform="translateX(".concat(s,"px)"))}break;case o.TOP:case o.BOTTOM:var l=(c-u)/f;switch(d){case o.TOP:p=c-b<0,l<0&&l>-n.height&&(r.style.transform="translateY(".concat(l,"px)"));break;case o.BOTTOM:p=c-b>0,l>0&&l<n.height&&(r.style.transform="translateY(".concat(l,"px)"))}}v=i,b=c};window.addEventListener("touchmove",h),window.addEventListener("touchend",(function t(n){n.preventDefault(),window.removeEventListener("touchmove",h),window.removeEventListener("touchmove",m),window.removeEventListener("touchend",t),r&&(e.style.display=l,r.remove(),p&&s(c))}))}};return e.addEventListener("touchstart",t),function(){e.removeEventListener("touchstart",t)}}}),[n.height,n.width,u,d,s,f,c]),Object(r.useEffect)((function(){if(u&&navigator.maxTouchPoints>0&&w.current){var e=w.current,t=function(e){e.preventDefault();var t=v(l,c);window.addEventListener("touchend",(function e(){window.removeEventListener("touchend",e),"function"===typeof t&&t()}))};return e.addEventListener("touchstart",t),function(){e.removeEventListener("touchstart",t)}}}),[u,v,l,c]),Object(R.jsx)("div",{ref:w,onClick:function(){"PLACEHOLDER"!==i&&(u?p():s(c))},className:h.join(" "),style:m})},G=C,A=[3,2],B=function(){var e=Object(r.useContext)(H),t=e.moveTileSound,n=e.wrongMoveRequestTileSound,i=e.boardOrderHintSound,c=e.levelCompletedSound,a=Object(r.useRef)(null),u=Object(r.useRef)(!0),l=Object(r.useState)(1),d=Object(g.a)(l,2),f=d[0],v=d[1],p=Object(r.useState)(A),O=Object(g.a)(p,2),x=O[0],y=O[1],E=Object(r.useState)(!1),T=Object(g.a)(E,2),L=T[0],S=T[1],k=Object(r.useState)(!1),I=Object(g.a)(k,2),C=I[0],D=I[1],N=Object(r.useState)(""),B=Object(g.a)(N,2),W=B[0],_=B[1],Y=Object(r.useState)(M),J=Object(g.a)(Y,1)[0],U=Object(r.useState)(M),V=Object(g.a)(U,2),X=V[0],$=V[1],K=Object(r.useState)([]),Q=Object(g.a)(K,2),Z=Q[0],ee=Q[1],te=Object(r.useState)([0,0]),ne=Object(g.a)(te,2),oe=ne[0],re=ne[1],ie=Object(r.useState)([]),ce=Object(g.a)(ie,2),ae=ce[0],se=ce[1],ue=Object(r.useState)(1),le=Object(g.a)(ue,2),de=le[0],fe=le[1],ve=Object(r.useState)(!1),be=Object(g.a)(ve,2),pe=be[0],he=be[1];Object(r.useEffect)((function(){L&&localStorage.setItem("boardConfig",JSON.stringify({level:f,tileGridDimensions:x,width:J,height:X,tileGrid:Z,emptySlot:oe,movableSlots:ae,scaleFactor:de}))}),[oe,X,L,f,ae,de,Z,x,J]);var me=Object(r.useCallback)((function(){se([]),setTimeout(Object(w.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _("You've completed level ".concat(f)),Z.flat().forEach((function(e){delete e.type})),ee(Object(m.a)(Z)),e.next=5,c();case 5:v((function(e){return e+1})),y((function(e){var t=Object(g.a)(e,2),n=t[0],o=t[1];return o>=n?n++:o++,[n,o]})),ee([]),S(!1),D(!1),_("");case 11:case"end":return e.stop()}}),e)}))),400)}),[f,c,Z]),we=Object(r.useCallback)((function(e){F(Z,oe,e),re(e),t(),!function(e){for(var t in e)for(var n in e[t])if(e[t][n].slot[0]!==parseInt(t)||e[t][n].slot[1]!==parseInt(n))return!1;return!0}(Z)?se(P(e,[Z.length-1,Z[0].length-1]).map((function(e){return e.join("")}))):me(),ee(Object(m.a)(Z))}),[oe,me,Z,t]),ge=Object(r.useCallback)((function(e,t){var n=Z.flat()[e],o=Z[t[0]][t[1]];if(n!==o){var r=n.type,i=o.type;return n.type="SLOT_HINT",o.type="MOVE_HINT",ee(Object(m.a)(Z)),function(){r?n.type=r:delete n.type,i?o.type=i:delete o.type,ee(Object(m.a)(Z))}}}),[Z]);return Object(r.useEffect)((function(){if(!C){var e=localStorage.getItem("boardConfig");if(e&&!0===u.current){if(!pe){he(!0);var t=JSON.parse(e),n=t.level,o=t.tileGridDimensions,r=t.width,i=t.height,c=t.tileGrid,a=t.emptySlot,s=t.movableSlots,l=t.scaleFactor;[n,o,r,i,c,a,s,l].every((function(e){return null!=e}))&&(v(n),y(o),$(i),ee(c),re(a),se(s),fe(l))}}else{var d=new Image;d.onload=function(){var e=M/(d.width/d.height);d.remove(),$(e);var t=z({width:J,height:e,dimensions:x,image:G}),n=t.tileGrid,o=t.emptySlot,r=t.movableSlots;ee(n),re(o),se(r.map((function(e){return e.join("")})))},d.style.visibility="hidden",document.body.append(d),d.src=G}u.current=!1,D(!0)}}),[J,x,pe,C]),Object(r.useEffect)((function(){var e=function(){if(a.current){var e={width:J,height:X},t=e.height,n=e.width,o=a.current.parentElement;if(o){var r=o.offsetHeight/t,i=o.offsetWidth/n;fe(r<1||i<1?r<i?r:i:1)}}};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[X,J]),Object(r.useEffect)((function(){if(a.current){var e=a.current,t=function(e){if(0===e.button){var t,n=setTimeout((function(){Z.forEach((function(e,t){e.forEach((function(e,n){e.slotHint=[t,n]}))})),i(),ee(Object(m.a)(Z)),t=function(){Z.flat().forEach((function(e){return delete e.slotHint})),ee(Object(m.a)(Z))}}),500);window.addEventListener("mouseup",(function e(){clearTimeout(n),"function"===typeof t&&t(),window.removeEventListener("mouseup",e)}))}};return e.addEventListener("mousedown",t),function(){e.removeEventListener("mousedown",t)}}}),[Z,i]),Object(r.useEffect)((function(){if(L){var e=function(e){var t=Object(g.a)(oe,2),o=t[0],r=t[1],i=function(){switch(e.key){case"ArrowUp":case"w":return[o+1,r];case"ArrowRight":case"d":return[o,r-1];case"ArrowDown":case"s":return[o-1,r];case"ArrowLeft":case"a":return[o,r+1]}return oe}();ae.includes(i.join(""))?we(i):n()};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}}}),[oe,ae,we,L,n]),Object(r.useEffect)((function(){if(!L){if(Z.length>0){_("Level ".concat(f));var e=setTimeout((function(){_(""),S(!0)}),3e3);return function(){return clearTimeout(e)}}_("Loading level ".concat(f,"..."))}}),[f,Z,L]),Object(R.jsx)("div",{ref:a,style:{transform:"scale(".concat(de,")"),transformOrigin:"top left",width:"".concat(100/de,"%"),height:"".concat(100/de,"%"),display:"flex",justifyContent:"center",alignItems:"center"},children:Object(R.jsxs)(s.a,{sx:{backgroundColor:"#ccc",overflow:"hidden",counterReset:"tile-number",borderRadius:3,position:"relative",transformOrigin:"top left",width:J,height:X},children:[Z&&Z.flat().map((function(e){var t=Object(g.a)(e.slot,2),n=t[0],i=t[1];return e.isLocked=!ae.includes("".concat(n).concat(i)),e.isLocked||(oe[0]===e.slot[0]?e.motionDirection=oe[1]-e.slot[1]===1?o.RIGHT:o.LEFT:e.motionDirection=oe[0]-e.slot[0]===1?o.BOTTOM:o.TOP),Object(r.createElement)(q,Object(b.a)(Object(b.a)({},e),{},{key:e.position,scaleFactor:de,onMoveRequest:we,onPositionHintRequest:ge}))})),W&&Object(R.jsx)(s.a,{display:"flex",position:"absolute",width:"100%",height:"100%",zIndex:9999,alignItems:"center",justifyContent:"center",bgcolor:"rgba(0,0,0,.7)",color:"#fff",children:Object(R.jsx)(j.a,{variant:"h1",children:W})})]})})},W=Object(l.a)({components:{MuiCssBaseline:{styleOverrides:{"@global":{html:{position:"relative",minHeight:"100%"},body:{margin:0,height:"100%",fontFamily:"RobotoRegular, sans-serif",cursor:"default",backgroundColor:"whitesmoke",color:"#282f3e","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},code:{fontFamily:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"},pre:{margin:0,padding:0}}}}}}),_=function(){var e=Object(r.useRef)();return Object(R.jsx)(d.a,{theme:W,children:Object(R.jsxs)(s.a,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",bgcolor:"#262626",boxSizing:"border-box",p:3},children:[Object(R.jsx)(s.a,{ref:e,sx:{width:"100%",height:"100%"},children:Object(R.jsx)(I,{children:Object(R.jsx)(B,{})})}),Object(R.jsx)(u.a,{onClick:function(){if(e.current){var t=e.current;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}},sx:{position:"absolute",bottom:5,right:5,color:"#fff"},size:"large",children:Object(R.jsx)(v.a,{sx:{fontSize:"1.2em"}})})]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),o(e),r(e),i(e),c(e)}))},J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(Object(R.jsx)(i.a.StrictMode,{children:Object(R.jsx)(_,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");J?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):U(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):U(t,e)}))}}(),Y()}},[[76,1,2]]]);
//# sourceMappingURL=main.43561368.chunk.js.map